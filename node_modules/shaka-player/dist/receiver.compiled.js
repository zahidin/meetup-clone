/*

 Copyright 2016 Google Inc.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function ShakaReceiver(){this.idleTimerId_=this.idle_=this.controlsTimerId_=this.controlsUi_=this.controlsElement_=this.pauseIcon_=this.receiver_=this.player_=this.video_=null;this.idleTimeout_=300}
ShakaReceiver.prototype.init=function(){shaka.polyfill.installAll();this.video_=document.getElementById("video");this.player_=new shaka.Player(this.video_);this.controlsUi_=new ShakaControls;this.controlsUi_.initMinimal(this.video_,this.player_);this.controlsElement_=document.getElementById("controls");this.pauseIcon_=document.getElementById("pauseIcon");this.idle_=document.getElementById("idle");this.video_.addEventListener("play",this.onPlayStateChange_.bind(this));this.video_.addEventListener("pause",
this.onPlayStateChange_.bind(this));this.video_.addEventListener("seeking",this.onPlayStateChange_.bind(this));this.video_.addEventListener("emptied",this.onPlayStateChange_.bind(this));this.receiver_=new shaka.cast.CastReceiver(this.video_,this.player_,this.appDataCallback_.bind(this));this.receiver_.addEventListener("caststatuschanged",this.checkIdle_.bind(this));this.startIdleTimer_()};ShakaReceiver.prototype.appDataCallback_=function(a){a&&ShakaDemoUtils.setupAssetMetadata(a.asset,this.player_)};
ShakaReceiver.prototype.checkIdle_=function(){console.debug("status changed","idle=",this.receiver_.isIdle());this.receiver_.isIdle()?(this.idle_.style.display="block",this.startIdleTimer_()):(this.idle_.style.display="none",this.cancelIdleTimer_(),this.player_.isAudioOnly()?this.video_.poster="https://shaka-player-demo.appspot.com/assets/audioOnly.gif":this.video_.removeAttribute("poster"))};
ShakaReceiver.prototype.startIdleTimer_=function(){this.cancelIdleTimer_();this.idleTimerId_=window.setTimeout(window.close.bind(window),1E3*this.idleTimeout_)};ShakaReceiver.prototype.cancelIdleTimer_=function(){null!=this.idleTimerId_&&(window.clearTimeout(this.idleTimerId_),this.idleTimerId_=null)};
ShakaReceiver.prototype.onPlayStateChange_=function(){null!=this.controlsTimerId_&&window.clearTimeout(this.controlsTimerId_);this.pauseIcon_.textContent=this.video_.paused?"pause":"play_arrow";this.video_.paused&&0<this.video_.readyState?this.controlsElement_.style.opacity=1:(this.controlsElement_.style.opacity=1,this.controlsTimerId_=window.setTimeout(function(){this.controlsElement_.style.opacity=0}.bind(this),3E3))};
function receiverAppInit(){window.receiver=new ShakaReceiver;window.receiver.init()}"loading"==document.readyState||"interactive"==document.readyState?window.addEventListener("load",receiverAppInit):receiverAppInit();var shakaAssets={Encoder:{UNKNOWN:"Unknown",SHAKA_PACKAGER:"Shaka packager",AXINOM:"Axinom",UNIFIED_STREAMING:"Unified Streaming",WOWZA:"Wowza",BITCODIN:"Bitcodin",NIMBLE_STREAMER:"Nimble Streamer",AZURE_MEDIA_SERVICES:"Azure Media Services",MP4BOX:"MP4Box",APPLE:"Apple",UPLYNK:"Verizon Digital Media Services"},Source:{SHAKA:"Shaka",AXINOM:"Axinom",UNIFIED_STREAMING:"Unified Streaming",DASH_IF:"DASH-IF",WOWZA:"Wowza",BITCODIN:"Bitcodin",NIMBLE_STREAMER:"Nimble Streamer",AZURE_MEDIA_SERVICES:"Azure Media Services",
GPAC:"GPAC",UPLYNK:"Verizon Digital Media Services"},KeySystem:{CLEAR_KEY:"org.w3.clearkey",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},Feature:{SEGMENT_BASE:"SegmentBase",SEGMENT_LIST_DURATION:"SegmentList w/ @duration",SEGMENT_LIST_TIMELINE:"SegmentList w/ SegmentTimeline",SEGMENT_TEMPLATE_DURATION:"SegmentTemplate w/ @duration",SEGMENT_TEMPLATE_TIMELINE:"SegmentTemplate w/ SegmentTimeline",PSSH:"embedded PSSH",MULTIKEY:"multiple keys",MULTIPERIOD:"multiple Periods",ENCRYPTED_WITH_CLEAR:"mixing encrypted and unencrypted periods",
AESCTR_16_BYTE_IV:"encrypted with AES CTR Mode using a 16 byte IV",AESCTR_8_BYTE_IV:"encrypted with AES CTR Mode using a 8 byte IV",TRICK_MODE:"special trick mode track",XLINK:"xlink",SUBTITLES:"subtitles",CAPTIONS:"captions",SEGMENTED_TEXT:"segmented text",EMBEDDED_TEXT:"embedded text",MULTIPLE_LANGUAGES:"multiple languages",LIVE:"live",WEBM:"WebM",MP4:"mp4",MP2TS:"MPEG-2 TS",TTML:"TTML",WEBVTT:"WebVTT",HIGH_DEFINITION:"high definition",ULTRA_HIGH_DEFINITION:"ultra-high definition",SURROUND:"surround sound",
HLS:"HLS"},UplynkResponseFilter:function(a,b){a==shaka.net.NetworkingEngine.RequestType.MANIFEST&&(shakaAssets.uplynk_prefix=b.headers["x-uplynk-prefix"]?b.headers["x-uplynk-prefix"]:"")},UplynkRequestFilter:function(a,b){a==shaka.net.NetworkingEngine.RequestType.LICENSE&&(-1!==b.uris[0].indexOf("wv")&&shakaAssets.uplynk_prefix?b.uris[0]=shakaAssets.uplynk_prefix.concat("/wv"):-1!==b.uris[0].indexOf("ck")&&shakaAssets.uplynk_prefix?b.uris[0]=shakaAssets.uplynk_prefix.concat("/ck"):-1!==b.uris[0].indexOf("pr")&&
shakaAssets.uplynk_prefix&&(b.uris[0]=shakaAssets.uplynk_prefix.concat("/pr")))}};
shakaAssets.testAssets=[{name:"Angel One (multicodec, multilingual)",manifestUri:"https://storage.googleapis.com/shaka-demo-assets/angel-one/dash.mpd",encoder:shakaAssets.Encoder.SHAKA_PACKAGER,source:shakaAssets.Source.SHAKA,drm:[],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.MULTIPLE_LANGUAGES,shakaAssets.Feature.SEGMENT_BASE,shakaAssets.Feature.SUBTITLES,shakaAssets.Feature.WEBM,shakaAssets.Feature.WEBVTT]},{name:"Angel One (multicodec, multilingual, Widevine)",manifestUri:"https://storage.googleapis.com/shaka-demo-assets/angel-one-widevine/dash.mpd",
encoder:shakaAssets.Encoder.SHAKA_PACKAGER,source:shakaAssets.Source.SHAKA,drm:[shakaAssets.KeySystem.WIDEVINE],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.MULTIPLE_LANGUAGES,shakaAssets.Feature.SEGMENT_BASE,shakaAssets.Feature.SUBTITLES,shakaAssets.Feature.WEBM,shakaAssets.Feature.WEBVTT],licenseServers:{"com.widevine.alpha":"https://cwip-shaka-proxy.appspot.com/no_auth"}},{name:"Angel One (multicodec, multilingual, ClearKey server)",manifestUri:"https://storage.googleapis.com/shaka-demo-assets/angel-one-clearkey/dash.mpd",
encoder:shakaAssets.Encoder.SHAKA_PACKAGER,source:shakaAssets.Source.SHAKA,drm:[shakaAssets.KeySystem.CLEAR_KEY],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.MULTIPLE_LANGUAGES,shakaAssets.Feature.SEGMENT_BASE,shakaAssets.Feature.SUBTITLES,shakaAssets.Feature.WEBM,shakaAssets.Feature.WEBVTT],licenseServers:{"org.w3.clearkey":"https://cwip-shaka-proxy.appspot.com/clearkey?_u3wDe7erb7v8Lqt8A3QDQ=ABEiM0RVZneImaq7zN3u_w"}},{name:"Angel One (HLS, MP4, multilingual)",manifestUri:"https://storage.googleapis.com/shaka-demo-assets/angel-one-hls/hls.m3u8",
encoder:shakaAssets.Encoder.SHAKA_PACKAGER,source:shakaAssets.Source.SHAKA,drm:[],features:[shakaAssets.Feature.HLS,shakaAssets.Feature.MP4,shakaAssets.Feature.MULTIPLE_LANGUAGES]},{name:"Angel One (HLS, MP4, multilingual, Widevine)",manifestUri:"https://storage.googleapis.com/shaka-demo-assets/angel-one-widevine-hls/hls.m3u8",encoder:shakaAssets.Encoder.SHAKA_PACKAGER,source:shakaAssets.Source.SHAKA,drm:[shakaAssets.KeySystem.WIDEVINE],features:[shakaAssets.Feature.HLS,shakaAssets.Feature.MP4,shakaAssets.Feature.MULTIPLE_LANGUAGES],
licenseServers:{"com.widevine.alpha":"https://cwip-shaka-proxy.appspot.com/no_auth"}},{name:"Sintel 4k (multicodec)",manifestUri:"https://storage.googleapis.com/shaka-demo-assets/sintel/dash.mpd",encoder:shakaAssets.Encoder.SHAKA_PACKAGER,source:shakaAssets.Source.SHAKA,drm:[],features:[shakaAssets.Feature.HIGH_DEFINITION,shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_BASE,shakaAssets.Feature.SUBTITLES,shakaAssets.Feature.ULTRA_HIGH_DEFINITION,shakaAssets.Feature.WEBM,shakaAssets.Feature.WEBVTT]},
{name:"Sintel w/ trick mode (MP4 only, 720p)",manifestUri:"https://storage.googleapis.com/shaka-demo-assets/sintel-trickplay/dash.mpd",encoder:shakaAssets.Encoder.SHAKA_PACKAGER,source:shakaAssets.Source.SHAKA,drm:[],features:[shakaAssets.Feature.HIGH_DEFINITION,shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_BASE,shakaAssets.Feature.SUBTITLES,shakaAssets.Feature.TRICK_MODE,shakaAssets.Feature.WEBVTT]},{name:"Sintel 4k (WebM only)",manifestUri:"https://storage.googleapis.com/shaka-demo-assets/sintel-webm-only/dash.mpd",
encoder:shakaAssets.Encoder.SHAKA_PACKAGER,source:shakaAssets.Source.SHAKA,drm:[],features:[shakaAssets.Feature.HIGH_DEFINITION,shakaAssets.Feature.SEGMENT_BASE,shakaAssets.Feature.SUBTITLES,shakaAssets.Feature.ULTRA_HIGH_DEFINITION,shakaAssets.Feature.WEBM,shakaAssets.Feature.WEBVTT]},{name:"Sintel 4k (MP4 only)",manifestUri:"https://storage.googleapis.com/shaka-demo-assets/sintel-mp4-only/dash.mpd",encoder:shakaAssets.Encoder.SHAKA_PACKAGER,source:shakaAssets.Source.SHAKA,drm:[],features:[shakaAssets.Feature.HIGH_DEFINITION,
shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_BASE,shakaAssets.Feature.SUBTITLES,shakaAssets.Feature.ULTRA_HIGH_DEFINITION,shakaAssets.Feature.WEBVTT]},{name:"Sintel 4k (multicodec, Widevine)",manifestUri:"https://storage.googleapis.com/shaka-demo-assets/sintel-widevine/dash.mpd",encoder:shakaAssets.Encoder.SHAKA_PACKAGER,source:shakaAssets.Source.SHAKA,drm:[shakaAssets.KeySystem.WIDEVINE],features:[shakaAssets.Feature.HIGH_DEFINITION,shakaAssets.Feature.MP4,shakaAssets.Feature.PSSH,shakaAssets.Feature.SEGMENT_BASE,
shakaAssets.Feature.SUBTITLES,shakaAssets.Feature.ULTRA_HIGH_DEFINITION,shakaAssets.Feature.WEBM,shakaAssets.Feature.WEBVTT],licenseServers:{"com.widevine.alpha":"https://cwip-shaka-proxy.appspot.com/no_auth"}},{name:"Sintel 4k (multicodec, VTT in MP4)",manifestUri:"https://storage.googleapis.com/shaka-demo-assets/sintel-mp4-wvtt/dash.mpd",encoder:shakaAssets.Encoder.SHAKA_PACKAGER,source:shakaAssets.Source.SHAKA,drm:[],features:[shakaAssets.Feature.EMBEDDED_TEXT,shakaAssets.Feature.HIGH_DEFINITION,
shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_BASE,shakaAssets.Feature.SUBTITLES,shakaAssets.Feature.ULTRA_HIGH_DEFINITION,shakaAssets.Feature.WEBM,shakaAssets.Feature.WEBVTT]},{name:"Heliocentrism (multicodec, multiperiod)",manifestUri:"https://storage.googleapis.com/shaka-demo-assets/heliocentrism/heliocentrism.mpd",encoder:shakaAssets.Encoder.SHAKA_PACKAGER,source:shakaAssets.Source.SHAKA,drm:[],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.MULTIPERIOD,shakaAssets.Feature.SEGMENT_BASE,
shakaAssets.Feature.WEBM]},{name:"Heliocentrism (multicodec, multiperiod, xlink)",manifestUri:"https://storage.googleapis.com/shaka-demo-assets/heliocentrism-xlink/heliocentrism.mpd",encoder:shakaAssets.Encoder.SHAKA_PACKAGER,source:shakaAssets.Source.SHAKA,drm:[],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.MULTIPERIOD,shakaAssets.Feature.SEGMENT_BASE,shakaAssets.Feature.WEBM,shakaAssets.Feature.XLINK]},{name:'"Dig the Uke" by Stefan Kartenberg (audio only, multicodec)',manifestUri:"https://storage.googleapis.com/shaka-demo-assets/dig-the-uke-clear/dash.mpd",
encoder:shakaAssets.Encoder.SHAKA_PACKAGER,source:shakaAssets.Source.SHAKA,drm:[],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_BASE,shakaAssets.Feature.WEBM]},{name:'"Dig the Uke" by Stefan Kartenberg (audio only, multicodec, Widevine)',manifestUri:"https://storage.googleapis.com/shaka-demo-assets/dig-the-uke/dash.mpd",encoder:shakaAssets.Encoder.SHAKA_PACKAGER,source:shakaAssets.Source.SHAKA,drm:[shakaAssets.KeySystem.WIDEVINE],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_BASE,
shakaAssets.Feature.WEBM],licenseServers:{"com.widevine.alpha":"https://cwip-shaka-proxy.appspot.com/no_auth"}},{name:"Tears of Steel (multicodec, TTML)",manifestUri:"https://storage.googleapis.com/shaka-demo-assets/tos-ttml/dash.mpd",encoder:shakaAssets.Encoder.SHAKA_PACKAGER,source:shakaAssets.Source.SHAKA,drm:[],features:[shakaAssets.Feature.HIGH_DEFINITION,shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_BASE,shakaAssets.Feature.SUBTITLES,shakaAssets.Feature.TTML,shakaAssets.Feature.WEBM]},
{name:"Tears of Steel (multicodec, surround + stereo)",manifestUri:"https://storage.googleapis.com/shaka-demo-assets/tos-surround/dash.mpd",encoder:shakaAssets.Encoder.SHAKA_PACKAGER,source:shakaAssets.Source.SHAKA,drm:[],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_BASE,shakaAssets.Feature.SURROUND,shakaAssets.Feature.WEBM]},{name:"Shaka Player History (multicodec, live, DASH)",manifestUri:"https://storage.googleapis.com/shaka-live-assets/player-source.mpd",encoder:shakaAssets.Encoder.SHAKA_PACKAGER,
source:shakaAssets.Source.SHAKA,drm:[],features:[shakaAssets.Feature.HIGH_DEFINITION,shakaAssets.Feature.LIVE,shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_TIMELINE,shakaAssets.Feature.WEBM]},{name:"Shaka Player History (live, HLS)",manifestUri:"https://storage.googleapis.com/shaka-live-assets/player-source.m3u8",encoder:shakaAssets.Encoder.SHAKA_PACKAGER,source:shakaAssets.Source.SHAKA,drm:[],features:[shakaAssets.Feature.HIGH_DEFINITION,shakaAssets.Feature.HLS,shakaAssets.Feature.LIVE,
shakaAssets.Feature.MP4]},{name:"Multi-DRM",manifestUri:"https://media.axprod.net/TestVectors/v7-MultiDRM-SingleKey/Manifest.mpd",encoder:shakaAssets.Encoder.AXINOM,source:shakaAssets.Source.AXINOM,drm:[shakaAssets.KeySystem.PLAYREADY,shakaAssets.KeySystem.WIDEVINE],features:[shakaAssets.Feature.EMBEDDED_TEXT,shakaAssets.Feature.HIGH_DEFINITION,shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_DURATION,shakaAssets.Feature.TTML,shakaAssets.Feature.ULTRA_HIGH_DEFINITION,shakaAssets.Feature.WEBVTT],
licenseServers:{"com.widevine.alpha":"https://drm-widevine-licensing.axtest.net/AcquireLicense","com.microsoft.playready":"https://drm-playready-licensing.axtest.net/AcquireLicense"},licenseRequestHeaders:{"X-AxDRM-Message":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ2ZXJzaW9uIjoxLCJjb21fa2V5X2lkIjoiYjMzNjRlYjUtNTFmNi00YWUzLThjOTgtMzNjZWQ1ZTMxYzc4IiwibWVzc2FnZSI6eyJ0eXBlIjoiZW50aXRsZW1lbnRfbWVzc2FnZSIsImtleXMiOlt7ImlkIjoiOWViNDA1MGQtZTQ0Yi00ODAyLTkzMmUtMjdkNzUwODNlMjY2IiwiZW5jcnlwdGVkX2tleSI6ImxLM09qSExZVzI0Y3Iya3RSNzRmbnc9PSJ9XX19.4lWwW46k-oWcah8oN18LPj5OLS5ZU-_AQv7fe0JhNjA"}},
{name:"Multi-DRM, multi-key",manifestUri:"https://media.axprod.net/TestVectors/v7-MultiDRM-MultiKey/Manifest.mpd",encoder:shakaAssets.Encoder.AXINOM,source:shakaAssets.Source.AXINOM,drm:[shakaAssets.KeySystem.PLAYREADY,shakaAssets.KeySystem.WIDEVINE],features:[shakaAssets.Feature.EMBEDDED_TEXT,shakaAssets.Feature.HIGH_DEFINITION,shakaAssets.Feature.MP4,shakaAssets.Feature.MULTIKEY,shakaAssets.Feature.SEGMENT_TEMPLATE_DURATION,shakaAssets.Feature.TTML,shakaAssets.Feature.ULTRA_HIGH_DEFINITION,shakaAssets.Feature.WEBVTT],
licenseServers:{"com.widevine.alpha":"https://drm-widevine-licensing.axtest.net/AcquireLicense","com.microsoft.playready":"https://drm-playready-licensing.axtest.net/AcquireLicense"},licenseRequestHeaders:{"X-AxDRM-Message":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ2ZXJzaW9uIjoxLCJjb21fa2V5X2lkIjoiYjMzNjRlYjUtNTFmNi00YWUzLThjOTgtMzNjZWQ1ZTMxYzc4IiwibWVzc2FnZSI6eyJ0eXBlIjoiZW50aXRsZW1lbnRfbWVzc2FnZSIsImtleXMiOlt7ImlkIjoiODAzOTliZjUtOGEyMS00MDE0LTgwNTMtZTI3ZTc0OGU5OGMwIiwiZW5jcnlwdGVkX2tleSI6ImxpTkpxVmFZa05oK01LY3hKRms3SWc9PSJ9LHsiaWQiOiI5MDk1M2UwOS02Y2IyLTQ5YTMtYTI2MC03YTVmZWZlYWQ0OTkiLCJlbmNyeXB0ZWRfa2V5Ijoia1l0SEh2cnJmQ01lVmRKNkxrYmtuZz09In0seyJpZCI6IjBlNGRhOTJiLWQwZTgtNGE2Ni04YzNmLWMyNWE5N2ViNjUzMiIsImVuY3J5cHRlZF9rZXkiOiI3dzdOWkhITE1nSjRtUUtFSzVMVE1RPT0ifSx7ImlkIjoiNTg1ZjIzM2YtMzA3Mi00NmYxLTlmYTQtNmRjMjJjNjZhMDE0IiwiZW5jcnlwdGVkX2tleSI6IkFjNFVVbVl0Qko1blBROU4xNXJjM2c9PSJ9LHsiaWQiOiI0MjIyYmQ3OC1iYzQ1LTQxYmYtYjYzZS02ZjgxNGRjMzkxZGYiLCJlbmNyeXB0ZWRfa2V5IjoiTzZGTzBmcVNXb3BwN2JqYy9ENGxNQT09In1dfX0.uF6YlKAREOmbniAeYiH070HSJhV0YS7zSKjlCtiDR5Y"}},
{name:"Multi-DRM, multi-key, multi-Period",manifestUri:"https://media.axprod.net/TestVectors/v7-MultiDRM-MultiKey-MultiPeriod/Manifest.mpd",encoder:shakaAssets.Encoder.AXINOM,source:shakaAssets.Source.AXINOM,drm:[shakaAssets.KeySystem.PLAYREADY,shakaAssets.KeySystem.WIDEVINE],features:[shakaAssets.Feature.EMBEDDED_TEXT,shakaAssets.Feature.HIGH_DEFINITION,shakaAssets.Feature.MP4,shakaAssets.Feature.MULTIKEY,shakaAssets.Feature.MULTIPERIOD,shakaAssets.Feature.SEGMENT_TEMPLATE_DURATION,shakaAssets.Feature.TTML,
shakaAssets.Feature.ULTRA_HIGH_DEFINITION,shakaAssets.Feature.WEBVTT],licenseServers:{"com.widevine.alpha":"https://drm-widevine-licensing.axtest.net/AcquireLicense","com.microsoft.playready":"https://drm-playready-licensing.axtest.net/AcquireLicense"},licenseRequestHeaders:{"X-AxDRM-Message":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ2ZXJzaW9uIjoxLCJjb21fa2V5X2lkIjoiYjMzNjRlYjUtNTFmNi00YWUzLThjOTgtMzNjZWQ1ZTMxYzc4IiwibWVzc2FnZSI6eyJ0eXBlIjoiZW50aXRsZW1lbnRfbWVzc2FnZSIsImtleXMiOlt7ImlkIjoiMDg3Mjc4NmUtZjllNy00NjVmLWEzYTItNGU1YjBlZjhmYTQ1IiwiZW5jcnlwdGVkX2tleSI6IlB3NitlRVlOY3ZqWWJmc2gzWDNmbWc9PSJ9LHsiaWQiOiJjMTRmMDcwOS1mMmI5LTQ0MjctOTE2Yi02MWI1MjU4NjUwNmEiLCJlbmNyeXB0ZWRfa2V5IjoiLzErZk5paDM4bXFSdjR5Y1l6bnQvdz09In0seyJpZCI6IjhiMDI5ZTUxLWQ1NmEtNDRiZC05MTBmLWQ0YjVmZDkwZmJhMiIsImVuY3J5cHRlZF9rZXkiOiJrcTBKdVpFanBGTjhzYVRtdDU2ME9nPT0ifSx7ImlkIjoiMmQ2ZTkzODctNjBjYS00MTQ1LWFlYzItYzQwODM3YjRiMDI2IiwiZW5jcnlwdGVkX2tleSI6IlRjUlFlQld4RW9IT0tIcmFkNFNlVlE9PSJ9LHsiaWQiOiJkZTAyZjA3Zi1hMDk4LTRlZTAtYjU1Ni05MDdjMGQxN2ZiYmMiLCJlbmNyeXB0ZWRfa2V5IjoicG9lbmNTN0dnbWVHRmVvSjZQRUFUUT09In0seyJpZCI6IjkxNGU2OWY0LTBhYjMtNDUzNC05ZTlmLTk4NTM2MTVlMjZmNiIsImVuY3J5cHRlZF9rZXkiOiJlaUkvTXNsbHJRNHdDbFJUL0xObUNBPT0ifSx7ImlkIjoiZGE0NDQ1YzItZGI1ZS00OGVmLWIwOTYtM2VmMzQ3YjE2YzdmIiwiZW5jcnlwdGVkX2tleSI6IjJ3K3pkdnFycERWM3hSMGJKeTR1Z3c9PSJ9LHsiaWQiOiIyOWYwNWU4Zi1hMWFlLTQ2ZTQtODBlOS0yMmRjZDQ0Y2Q3YTEiLCJlbmNyeXB0ZWRfa2V5IjoiL3hsU0hweHdxdTNnby9nbHBtU2dhUT09In0seyJpZCI6IjY5ZmU3MDc3LWRhZGQtNGI1NS05NmNkLWMzZWRiMzk5MTg1MyIsImVuY3J5cHRlZF9rZXkiOiJ6dTZpdXpOMnBzaTBaU3hRaUFUa1JRPT0ifV19fQ.BXr93Et1krYMVs-CUnf7F3ywJWFRtxYdkR7Qn4w3-to"}},
{name:"Clear, single-Period",manifestUri:"https://media.axprod.net/TestVectors/v7-Clear/Manifest.mpd",encoder:shakaAssets.Encoder.AXINOM,source:shakaAssets.Source.AXINOM,drm:[],features:[shakaAssets.Feature.EMBEDDED_TEXT,shakaAssets.Feature.HIGH_DEFINITION,shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_DURATION,shakaAssets.Feature.TTML,shakaAssets.Feature.ULTRA_HIGH_DEFINITION,shakaAssets.Feature.WEBVTT]},{name:"Clear, multi-Period",manifestUri:"https://media.axprod.net/TestVectors/v7-Clear/Manifest_MultiPeriod.mpd",
encoder:shakaAssets.Encoder.AXINOM,source:shakaAssets.Source.AXINOM,drm:[],features:[shakaAssets.Feature.EMBEDDED_TEXT,shakaAssets.Feature.HIGH_DEFINITION,shakaAssets.Feature.MP4,shakaAssets.Feature.MULTIPERIOD,shakaAssets.Feature.SEGMENT_TEMPLATE_DURATION,shakaAssets.Feature.TTML,shakaAssets.Feature.ULTRA_HIGH_DEFINITION,shakaAssets.Feature.WEBVTT]},{name:"Clear, Live DASH",manifestUri:"https://akamai-axtest.akamaized.net/routes/lapd-v1-acceptance/www_c4/Manifest.mpd",encoder:shakaAssets.Encoder.AXINOM,
source:shakaAssets.Source.AXINOM,drm:[],features:[shakaAssets.Feature.EMBEDDED_TEXT,shakaAssets.Feature.LIVE,shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_DURATION,shakaAssets.Feature.WEBVTT]},{name:"Clear, Live HLS",manifestUri:"https://akamai-axtest.akamaized.net/routes/lapd-v1-acceptance/www_c4/Manifest.m3u8",encoder:shakaAssets.Encoder.AXINOM,source:shakaAssets.Source.AXINOM,drm:[],features:[shakaAssets.Feature.HLS,shakaAssets.Feature.LIVE,shakaAssets.Feature.MP4,shakaAssets.Feature.WEBVTT]},
{name:"Tears of Steel",manifestUri:"https://demo.unified-streaming.com/video/tears-of-steel/tears-of-steel.ism/.mpd",encoder:shakaAssets.Encoder.UNIFIED_STREAMING,source:shakaAssets.Source.UNIFIED_STREAMING,drm:[],features:[shakaAssets.Feature.HIGH_DEFINITION,shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_TIMELINE,shakaAssets.Feature.ULTRA_HIGH_DEFINITION]},{name:"Tears of Steel (Widevine)",manifestUri:"https://demo.unified-streaming.com/video/tears-of-steel/tears-of-steel-dash-widevine.ism/.mpd",
encoder:shakaAssets.Encoder.UNIFIED_STREAMING,source:shakaAssets.Source.UNIFIED_STREAMING,drm:[shakaAssets.KeySystem.WIDEVINE],features:[shakaAssets.Feature.EMBEDDED_TEXT,shakaAssets.Feature.HIGH_DEFINITION,shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_TIMELINE,shakaAssets.Feature.SUBTITLES,shakaAssets.Feature.TTML,shakaAssets.Feature.ULTRA_HIGH_DEFINITION],licenseServers:{"com.widevine.alpha":"https://cwip-shaka-proxy.appspot.com/no_auth"}},{name:"Tears of Steel (PlayReady)",manifestUri:"https://demo.unified-streaming.com/video/tears-of-steel/tears-of-steel-dash-playready.ism/.mpd",
encoder:shakaAssets.Encoder.UNIFIED_STREAMING,source:shakaAssets.Source.UNIFIED_STREAMING,drm:[shakaAssets.KeySystem.PLAYREADY],features:[shakaAssets.Feature.EMBEDDED_TEXT,shakaAssets.Feature.HIGH_DEFINITION,shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_TIMELINE,shakaAssets.Feature.SUBTITLES,shakaAssets.Feature.TTML,shakaAssets.Feature.ULTRA_HIGH_DEFINITION],licenseServers:{"com.microsoft.playready":"https://test.playready.microsoft.com/service/rightsmanager.asmx?PlayRight=1&UseSimpleNonPersistentLicense=1"}},
{name:"Tears of Steel (subtitles)",manifestUri:"https://demo.unified-streaming.com/video/tears-of-steel/tears-of-steel-en.ism/.mpd",encoder:shakaAssets.Encoder.UNIFIED_STREAMING,source:shakaAssets.Source.UNIFIED_STREAMING,drm:[],features:[shakaAssets.Feature.EMBEDDED_TEXT,shakaAssets.Feature.HIGH_DEFINITION,shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_TIMELINE,shakaAssets.Feature.SEGMENTED_TEXT,shakaAssets.Feature.SUBTITLES,shakaAssets.Feature.TTML,shakaAssets.Feature.ULTRA_HIGH_DEFINITION]},
{name:"Big Buck Bunny",manifestUri:"https://dash.akamaized.net/dash264/TestCases/1c/qualcomm/2/MultiRate.mpd",encoder:shakaAssets.Encoder.UNKNOWN,source:shakaAssets.Source.DASH_IF,drm:[],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_TIMELINE]},{name:"Live sim (2s segments)",manifestUri:"https://vm2.dashif.org/livesim/utc_head/testpic_2s/Manifest.mpd",encoder:shakaAssets.Encoder.UNKNOWN,source:shakaAssets.Source.DASH_IF,drm:[],features:[shakaAssets.Feature.LIVE,shakaAssets.Feature.MP4,
shakaAssets.Feature.SEGMENT_TEMPLATE_TIMELINE]},{name:"Live sim (6s segments)",manifestUri:"https://vm2.dashif.org/livesim/utc_head/testpic_6s/Manifest.mpd",encoder:shakaAssets.Encoder.UNKNOWN,source:shakaAssets.Source.DASH_IF,drm:[],features:[shakaAssets.Feature.LIVE,shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_TIMELINE]},{name:"Live sim (multi-period)",manifestUri:"https://vm2.dashif.org/livesim/utc_head/periods_20/testpic_2s/Manifest.mpd",encoder:shakaAssets.Encoder.UNKNOWN,source:shakaAssets.Source.DASH_IF,
drm:[],features:[shakaAssets.Feature.LIVE,shakaAssets.Feature.MP4,shakaAssets.Feature.MULTIPERIOD,shakaAssets.Feature.SEGMENT_TEMPLATE_TIMELINE]},{name:"Big Buck Bunny (Live)",manifestUri:"https://wowzaec2demo.streamlock.net/live/bigbuckbunny/manifest_mpm4sav_mvtime.mpd",encoder:shakaAssets.Encoder.WOWZA,source:shakaAssets.Encoder.WOWZA,drm:[],features:[shakaAssets.Feature.LIVE,shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_TIMELINE]},{name:"Art of Motion (DASH)",manifestUri:"https://bitdash-a.akamaihd.net/content/MI201109210084_1/mpds/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.mpd",
encoder:shakaAssets.Encoder.BITCODIN,source:shakaAssets.Source.BITCODIN,drm:[],features:[shakaAssets.Feature.HIGH_DEFINITION,shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_DURATION]},{name:"Art of Motion (HLS, TS)",manifestUri:"https://bitdash-a.akamaihd.net/content/MI201109210084_1/m3u8s/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.m3u8",encoder:shakaAssets.Encoder.BITCODIN,source:shakaAssets.Source.BITCODIN,drm:[],features:[shakaAssets.Feature.HIGH_DEFINITION,shakaAssets.Feature.HLS,shakaAssets.Feature.MP2TS]},
{name:"Sintel (HLS, TS, 4k)",manifestUri:"https://bitdash-a.akamaihd.net/content/sintel/hls/playlist.m3u8",encoder:shakaAssets.Encoder.BITCODIN,source:shakaAssets.Source.BITCODIN,drm:[],features:[shakaAssets.Feature.HIGH_DEFINITION,shakaAssets.Feature.HLS,shakaAssets.Feature.MP2TS,shakaAssets.Feature.ULTRA_HIGH_DEFINITION]},{name:"Big Buck Bunny",manifestUri:"https://video.wmspanel.com/local/raw/BigBuckBunny_320x180.mp4/manifest.mpd",disabled:!0,encoder:shakaAssets.Encoder.NIMBLE_STREAMER,source:shakaAssets.Source.NIMBLE_STREAMER,
drm:[],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_TIMELINE]},{name:"Azure Trailer",manifestUri:"https://amssamples.streaming.mediaservices.windows.net/91492735-c523-432b-ba01-faba6c2206a2/AzureMediaServicesPromo.ism/manifest(format=mpd-time-csf)",encoder:shakaAssets.Encoder.AZURE_MEDIA_SERVICES,source:shakaAssets.Source.AZURE_MEDIA_SERVICES,drm:[],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_TIMELINE]},{name:"Big Buck Bunny",manifestUri:"https://amssamples.streaming.mediaservices.windows.net/622b189f-ec39-43f2-93a2-201ac4e31ce1/BigBuckBunny.ism/manifest(format=mpd-time-csf)",
disabled:!0,encoder:shakaAssets.Encoder.AZURE_MEDIA_SERVICES,source:shakaAssets.Source.AZURE_MEDIA_SERVICES,drm:[shakaAssets.KeySystem.PLAYREADY,shakaAssets.KeySystem.WIDEVINE],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_TIMELINE],licenseServers:{"com.widevine.alpha":"https://amssamples.keydelivery.mediaservices.windows.net/Widevine/?KID=1ab45440-532c-4399-94dc-5c5ad9584bac","com.microsoft.playready":"https://amssamples.keydelivery.mediaservices.windows.net/PlayReady/"}},
{name:"Tears Of Steel (external text)",manifestUri:"https://ams-samplescdn.streaming.mediaservices.windows.net/11196e3d-2f40-4835-9a4d-fc52751b0323/TearsOfSteel_WAMEH264SmoothStreaming720p.ism/manifest(format=mpd-time-csf)",extraText:[{uri:"https://ams-samplescdn.streaming.mediaservices.windows.net/11196e3d-2f40-4835-9a4d-fc52751b0323/TOS-en.vtt",language:"en",kind:"subtitle",mime:"text/vtt"},{uri:"https://ams-samplescdn.streaming.mediaservices.windows.net/11196e3d-2f40-4835-9a4d-fc52751b0323/TOS-es.vtt",
language:"es",kind:"subtitle",mime:"text/vtt"},{uri:"https://ams-samplescdn.streaming.mediaservices.windows.net/11196e3d-2f40-4835-9a4d-fc52751b0323/TOS-fr.vtt",language:"fr",kind:"subtitle",mime:"text/vtt"}],encoder:shakaAssets.Encoder.AZURE_MEDIA_SERVICES,source:shakaAssets.Source.AZURE_MEDIA_SERVICES,drm:[],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_TIMELINE,shakaAssets.Feature.SUBTITLES,shakaAssets.Feature.WEBVTT]},{name:"live profile",manifestUri:"https://download.tsi.telecom-paristech.fr/gpac/DASH_CONFORMANCE/TelecomParisTech/mp4-live/mp4-live-mpd-AV-BS.mpd",
disabled:!0,encoder:shakaAssets.Encoder.MP4BOX,source:shakaAssets.Source.GPAC,drm:[],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_DURATION]},{name:"live profile with five periods",manifestUri:"https://download.tsi.telecom-paristech.fr/gpac/DASH_CONFORMANCE/TelecomParisTech/mp4-live-periods/mp4-live-periods-mpd.mpd",encoder:shakaAssets.Encoder.MP4BOX,source:shakaAssets.Source.GPAC,drm:[],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.MULTIPERIOD,shakaAssets.Feature.SEGMENT_TEMPLATE_DURATION]},
{name:"main profile, single file",manifestUri:"https://download.tsi.telecom-paristech.fr/gpac/DASH_CONFORMANCE/TelecomParisTech/mp4-main-single/mp4-main-single-mpd-AV-NBS.mpd",encoder:shakaAssets.Encoder.MP4BOX,source:shakaAssets.Source.GPAC,drm:[],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_LIST_DURATION]},{name:"main profile, mutiple files",manifestUri:"https://download.tsi.telecom-paristech.fr/gpac/DASH_CONFORMANCE/TelecomParisTech/mp4-main-multi/mp4-main-multi-mpd-AV-BS.mpd",
disabled:!0,encoder:shakaAssets.Encoder.MP4BOX,source:shakaAssets.Source.GPAC,drm:[],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_LIST_DURATION]},{name:"onDemand profile",manifestUri:"https://download.tsi.telecom-paristech.fr/gpac/DASH_CONFORMANCE/TelecomParisTech/mp4-onDemand/mp4-onDemand-mpd-AV.mpd",encoder:shakaAssets.Encoder.MP4BOX,source:shakaAssets.Source.GPAC,drm:[],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_BASE]},{name:"main profile, open GOP",manifestUri:"https://download.tsi.telecom-paristech.fr/gpac/DASH_CONFORMANCE/TelecomParisTech/mp4-main-ogop/mp4-main-ogop-mpd-AV-BS.mpd",
disabled:!0,encoder:shakaAssets.Encoder.MP4BOX,source:shakaAssets.Source.GPAC,drm:[],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_DURATION]},{name:"full profile, gradual decoding refresh",manifestUri:"https://download.tsi.telecom-paristech.fr/gpac/DASH_CONFORMANCE/TelecomParisTech/mp4-full-gdr/mp4-full-gdr-mpd-AV-BS.mpd",disabled:!0,encoder:shakaAssets.Encoder.MP4BOX,source:shakaAssets.Source.GPAC,drm:[],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_DURATION]},
{name:"Multi DRM - 8 Byte IV",manifestUri:"https://content.uplynk.com/847859273a4b4a81959d8fea181672a4.mpd?pr.version=2&pr.playenabler=B621D91F-EDCC-4035-8D4B-DC71760D43E9&pr.securitylevel=150",encoder:shakaAssets.Encoder.UPLYNK,source:shakaAssets.Source.UPLYNK,drm:[shakaAssets.KeySystem.PLAYREADY,shakaAssets.KeySystem.WIDEVINE],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.PSSH,shakaAssets.Feature.MULTIKEY,shakaAssets.Feature.AESCTR_8_BYTE_IV,shakaAssets.Feature.SEGMENT_LIST_DURATION,shakaAssets.Feature.HIGH_DEFINITION],
licenseServers:{"com.microsoft.playready":"https://content.uplynk.com/pr","com.widevine.alpha":"https://content.uplynk.com/wv"},requestFilter:shakaAssets.UplynkRequestFilter,responseFilter:shakaAssets.UplynkResponseFilter},{name:"Multi DRM - MultiPeriod - 8 Byte IV",manifestUri:"https://content.uplynk.com/054225d59be2454fabdca3e96912d847.mpd?ad=cleardash&pr.version=2&pr.playenabler=B621D91F-EDCC-4035-8D4B-DC71760D43E9&pr.securitylevel=150",encoder:shakaAssets.Encoder.UPLYNK,source:shakaAssets.Source.UPLYNK,
drm:[shakaAssets.KeySystem.PLAYREADY,shakaAssets.KeySystem.WIDEVINE],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.PSSH,shakaAssets.Feature.MULTIKEY,shakaAssets.Feature.MULTIPERIOD,shakaAssets.Feature.SEGMENT_LIST_DURATION,shakaAssets.Feature.AESCTR_8_BYTE_IV,shakaAssets.Feature.HIGH_DEFINITION],licenseServers:{"com.microsoft.playready":"https://content.uplynk.com/pr","com.widevine.alpha":"https://content.uplynk.com/wv"},requestFilter:shakaAssets.UplynkRequestFilter,responseFilter:shakaAssets.UplynkResponseFilter},
{name:"Widevine - 16 Byte IV",manifestUri:"https://content.uplynk.com/224ac8717e714b68831997ab6cea4015.mpd",encoder:shakaAssets.Encoder.UPLYNK,source:shakaAssets.Source.UPLYNK,drm:[shakaAssets.KeySystem.WIDEVINE],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.PSSH,shakaAssets.Feature.MULTIKEY,shakaAssets.Feature.AESCTR_16_BYTE_IV,shakaAssets.Feature.SEGMENT_LIST_DURATION,shakaAssets.Feature.HIGH_DEFINITION],licenseServers:{"com.widevine.alpha":"https://content.uplynk.com/wv"},requestFilter:shakaAssets.UplynkRequestFilter,
responseFilter:shakaAssets.UplynkResponseFilter},{name:"Widevine - 16 Byte IV - (mix of encrypted and unencrypted periods)",manifestUri:"https://content.uplynk.com/1eb40d8e64234f5c9879db7045c3d48c.mpd?ad=cleardash&rays=cdefg",encoder:shakaAssets.Encoder.UPLYNK,source:shakaAssets.Source.UPLYNK,drm:[shakaAssets.KeySystem.WIDEVINE],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.MULTIPLE_LANGUAGES,shakaAssets.Feature.SEGMENT_LIST_DURATION,shakaAssets.Feature.PSSH,shakaAssets.Feature.HIGH_DEFINITION,
shakaAssets.Feature.MULTIPERIOD,shakaAssets.Feature.MULTIKEY,shakaAssets.Feature.AESCTR_16_BYTE_IV,shakaAssets.Feature.ENCRYPTED_WITH_CLEAR],licenseServers:{"com.widevine.alpha":"https://content.uplynk.com/wv"},requestFilter:shakaAssets.UplynkRequestFilter,responseFilter:shakaAssets.UplynkResponseFilter}];function ShakaControls(){this.enabled_=!0;this.castProxy_=null;this.castAllowed_=!0;this.player_=this.video_=this.onError_=null;this.videoContainer_=document.getElementById("videoContainer");this.controls_=document.getElementById("controls");this.playPauseButton_=document.getElementById("playPauseButton");this.seekBar_=document.getElementById("seekBar");this.muteButton_=document.getElementById("muteButton");this.volumeBar_=document.getElementById("volumeBar");this.captionButton_=document.getElementById("captionButton");
this.fullscreenButton_=document.getElementById("fullscreenButton");this.currentTime_=document.getElementById("currentTime");this.rewindButton_=document.getElementById("rewindButton");this.fastForwardButton_=document.getElementById("fastForwardButton");this.castButton_=document.getElementById("castButton");this.castReceiverName_=document.getElementById("castReceiverName");this.bufferingSpinner_=document.getElementById("bufferingSpinner");this.giantPlayButtonContainer_=document.getElementById("giantPlayButtonContainer");
this.isSeeking_=!1;this.trickPlayRate_=1;this.lastTouchEventTime_=this.mouseStillTimeoutId_=this.seekTimeoutId_=null}
ShakaControls.prototype.init=function(a,b,c){this.castProxy_=a;this.onError_=b;this.notifyCastStatus_=c;this.initMinimal(a.getVideo(),a.getPlayer());this.playPauseButton_.addEventListener("click",this.onPlayPauseClick_.bind(this));this.video_.addEventListener("play",this.onPlayStateChange_.bind(this));this.video_.addEventListener("pause",this.onPlayStateChange_.bind(this));this.video_.addEventListener("ended",this.onPlayStateChange_.bind(this));this.seekBar_.addEventListener("mousedown",this.onSeekStart_.bind(this));
this.seekBar_.addEventListener("touchstart",this.onSeekStart_.bind(this),{passive:!0});this.seekBar_.addEventListener("input",this.onSeekInput_.bind(this));this.seekBar_.addEventListener("touchend",this.onSeekEnd_.bind(this));this.seekBar_.addEventListener("mouseup",this.onSeekEnd_.bind(this));this.muteButton_.addEventListener("click",this.onMuteClick_.bind(this));this.volumeBar_.addEventListener("input",this.onVolumeInput_.bind(this));this.video_.addEventListener("volumechange",this.onVolumeStateChange_.bind(this));
this.onVolumeStateChange_();this.captionButton_.addEventListener("click",this.onCaptionClick_.bind(this));this.player_.addEventListener("texttrackvisibility",this.onCaptionStateChange_.bind(this));this.player_.addEventListener("trackschanged",this.onTracksChange_.bind(this));this.onCaptionStateChange_();this.fullscreenButton_.addEventListener("click",this.onFullscreenClick_.bind(this));this.currentTime_.addEventListener("click",this.onCurrentTimeClick_.bind(this));this.rewindButton_.addEventListener("click",
this.onRewindClick_.bind(this));this.fastForwardButton_.addEventListener("click",this.onFastForwardClick_.bind(this));this.castButton_.addEventListener("click",this.onCastClick_.bind(this));this.videoContainer_.addEventListener("touchstart",this.onContainerTouch_.bind(this),{passive:!1});this.videoContainer_.addEventListener("click",this.onContainerClick_.bind(this));this.controls_.addEventListener("click",function(a){a.stopPropagation()});this.videoContainer_.addEventListener("mousemove",this.onMouseMove_.bind(this));
this.videoContainer_.addEventListener("touchmove",this.onMouseMove_.bind(this),{passive:!0});this.videoContainer_.addEventListener("touchend",this.onMouseMove_.bind(this),{passive:!0});this.videoContainer_.addEventListener("mouseout",this.onMouseOut_.bind(this));this.castProxy_.addEventListener("caststatuschanged",this.onCastStatusChange_.bind(this));screen.orientation&&screen.orientation.addEventListener("change",this.onScreenRotation_.bind(this))};
ShakaControls.prototype.onScreenRotation_=function(){this.video_&&0!=this.video_.readyState&&!this.castProxy_.isCasting()&&(0<=screen.orientation.type.indexOf("landscape")&&!document.fullscreenElement?this.videoContainer_.requestFullscreen():0<=screen.orientation.type.indexOf("portrait")&&document.fullscreenElement&&document.exitFullscreen())};
ShakaControls.prototype.initMinimal=function(a,b){this.video_=a;this.player_=b;this.player_.addEventListener("buffering",this.onBufferingStateChange_.bind(this));window.setInterval(this.updateTimeAndSeekRange_.bind(this),125)};ShakaControls.prototype.allowCast=function(a){this.castAllowed_=a;this.onCastStatusChange_(null)};ShakaControls.prototype.loadComplete=function(){this.onPlayStateChange_()};
ShakaControls.prototype.setEnabled=function(a){(this.enabled_=a)?(this.controls_.parentElement.style.display="inherit",this.video_.controls=!1):(this.controls_.parentElement.style.display="none",this.video_.controls=!0);this.onPlayStateChange_()};
ShakaControls.prototype.onMouseMove_=function(a){"touchstart"==a.type||"touchmove"==a.type||"touchend"==a.type?this.lastTouchEventTime_=Date.now():this.lastTouchEventTime_+1E3<Date.now()&&(this.lastTouchEventTime_=null);this.lastTouchEventTime_&&"mousemove"==a.type||(this.videoContainer_.style.cursor="",this.controls_.style.opacity=1,this.updateTimeAndSeekRange_(),this.mouseStillTimeoutId_&&window.clearTimeout(this.mouseStillTimeoutId_),"touchend"!=a.type&&this.lastTouchEventTime_||(this.mouseStillTimeoutId_=
window.setTimeout(this.onMouseStill_.bind(this),3E3)))};ShakaControls.prototype.onMouseOut_=function(){this.lastTouchEventTime_||(this.mouseStillTimeoutId_&&window.clearTimeout(this.mouseStillTimeoutId_),this.onMouseStill_())};ShakaControls.prototype.onMouseStill_=function(){this.mouseStillTimeoutId_=null;this.videoContainer_.style.cursor="none";this.controls_.style.opacity=this.lastTouchEventTime_?"0":""};
ShakaControls.prototype.onContainerTouch_=function(a){this.video_.duration&&(1==this.controls_.style.opacity?this.lastTouchEventTime_=Date.now():(this.onMouseMove_(a),a.preventDefault()))};ShakaControls.prototype.onContainerClick_=function(a){if(this.enabled_)this.onPlayPauseClick_()};ShakaControls.prototype.onPlayPauseClick_=function(){this.enabled_&&this.video_.duration&&(this.player_.cancelTrickPlay(),this.trickPlayRate_=1,this.video_.paused?this.video_.play():this.video_.pause())};
ShakaControls.prototype.onPlayStateChange_=function(){this.video_.ended&&!this.video_.paused&&this.video_.pause();this.enabled_&&this.video_.paused&&!this.isSeeking_?(this.playPauseButton_.textContent="play_arrow",this.giantPlayButtonContainer_.style.display="inline"):(this.playPauseButton_.textContent="pause",this.giantPlayButtonContainer_.style.display="none")};ShakaControls.prototype.onSeekStart_=function(){this.enabled_&&(this.isSeeking_=!0,this.video_.pause())};
ShakaControls.prototype.onSeekInput_=function(){this.enabled_&&this.video_.duration&&(this.updateTimeAndSeekRange_(),null!=this.seekTimeoutId_&&window.clearTimeout(this.seekTimeoutId_),this.seekTimeoutId_=window.setTimeout(this.onSeekInputTimeout_.bind(this),125))};ShakaControls.prototype.onSeekInputTimeout_=function(){this.seekTimeoutId_=null;this.video_.currentTime=parseFloat(this.seekBar_.value)};
ShakaControls.prototype.onSeekEnd_=function(){this.enabled_&&(null!=this.seekTimeoutId_&&(window.clearTimeout(this.seekTimeoutId_),this.onSeekInputTimeout_()),this.isSeeking_=!1,this.video_.play())};ShakaControls.prototype.onMuteClick_=function(){this.enabled_&&(this.video_.muted=!this.video_.muted)};
ShakaControls.prototype.onVolumeStateChange_=function(){this.video_.muted?(this.muteButton_.textContent="volume_off",this.volumeBar_.value=0):(this.muteButton_.textContent="volume_up",this.volumeBar_.value=this.video_.volume);var a=["to right"];a.push("#ccc "+100*this.volumeBar_.value+"%");a.push("#000 "+100*this.volumeBar_.value+"%");a.push("#000 100%");this.volumeBar_.style.background="linear-gradient("+a.join(",")+")"};
ShakaControls.prototype.onVolumeInput_=function(){this.video_.volume=parseFloat(this.volumeBar_.value);this.video_.muted=!1};ShakaControls.prototype.onCaptionClick_=function(){this.enabled_&&this.player_.setTextTrackVisibility(!this.player_.isTextTrackVisible())};ShakaControls.prototype.onTracksChange_=function(){if(ShakaDemoUtils.isTsContent(this.player_))this.captionButton_.style.display="inherit";else{var a=this.player_.getTextTracks().length;this.captionButton_.style.display=a?"inherit":"none"}};
ShakaControls.prototype.onCaptionStateChange_=function(){this.player_.isTextTrackVisible()?this.captionButton_.style.color="white":this.captionButton_.style.color="rgba(255, 255, 255, 0.3)"};ShakaControls.prototype.onFullscreenClick_=function(){this.enabled_&&(document.fullscreenElement?document.exitFullscreen():this.videoContainer_.requestFullscreen())};ShakaControls.prototype.onCurrentTimeClick_=function(){this.enabled_&&this.player_.isLive()&&(this.video_.currentTime=this.seekBar_.max)};
ShakaControls.prototype.onRewindClick_=function(){this.enabled_&&this.video_.duration&&(this.trickPlayRate_=0<this.trickPlayRate_||-4>this.trickPlayRate_?-1:2*this.trickPlayRate_,this.player_.trickPlay(this.trickPlayRate_))};ShakaControls.prototype.onFastForwardClick_=function(){this.enabled_&&this.video_.duration&&(this.trickPlayRate_=0>this.trickPlayRate_||4<this.trickPlayRate_?1:2*this.trickPlayRate_,this.player_.trickPlay(this.trickPlayRate_))};
ShakaControls.prototype.onCastClick_=function(){this.enabled_&&(this.castProxy_.isCasting()?this.castProxy_.suggestDisconnect():(this.castButton_.disabled=!0,document.getElementById("loadButton").disabled=!0,document.getElementById("unloadButton").disabled=!0,this.castProxy_.cast().then(function(){document.getElementById("loadButton").disabled=!1;document.getElementById("unloadButton").disabled=!1;this.castButton_.disabled=!1}.bind(this),function(a){this.castButton_.disabled=!1;document.getElementById("loadButton").disabled=
!1;document.getElementById("unloadButton").disabled=!1;if(a.code!=shaka.util.Error.Code.CAST_CANCELED_BY_USER)this.onError_(a)}.bind(this))))};
ShakaControls.prototype.onCastStatusChange_=function(a){a=this.castProxy_.canCast()&&this.castAllowed_;var b=this.castProxy_.isCasting();this.notifyCastStatus_(b);this.castButton_.style.display=a?"inherit":"none";this.castButton_.textContent=b?"cast_connected":"cast";this.castReceiverName_.style.display=b?"inherit":"none";this.castReceiverName_.textContent=b?"Casting to "+this.castProxy_.receiverName():"";this.castProxy_.isCasting()?this.controls_.classList.add("casting"):this.controls_.classList.remove("casting")};
ShakaControls.prototype.onBufferingStateChange_=function(a){this.bufferingSpinner_.style.display=a.buffering?"inherit":"none"};ShakaControls.prototype.showTrickPlay=function(a){this.seekBar_.parentElement.style.width=a?"auto":"100%";this.seekBar_.style.display=a?"none":"flex";this.rewindButton_.style.display=a?"inline":"none";this.fastForwardButton_.style.display=a?"inline":"none"};
ShakaControls.prototype.isOpaque_=function(){if(!this.enabled_)return!1;if(this.castProxy_&&this.castProxy_.isCasting())return!0;var a=this.controls_.parentElement;return 1==this.controls_.style.opacity||a.querySelector("#controls:hover")==this.controls_};
ShakaControls.prototype.updateTimeAndSeekRange_=function(){if(this.isOpaque_()){var a=this.isSeeking_?this.seekBar_.value:this.video_.currentTime,b=this.video_.duration,c=this.video_.buffered.length,f=c?this.video_.buffered.start(0):0,d=c?this.video_.buffered.end(c-1):0,e=this.player_.seekRange(),g=e.end-e.start;this.seekBar_.min=e.start;this.seekBar_.max=e.end;this.player_.isLive()?(a=Math.max(0,Math.floor(e.end-a)),b=3600<=g,1<=a||this.isSeeking_?(this.currentTime_.textContent="- "+this.buildTimeString_(a,
b),this.currentTime_.style.cursor="pointer"):(this.currentTime_.textContent="LIVE",this.currentTime_.style.cursor=""),this.isSeeking_||(this.seekBar_.value=e.end-a)):(this.currentTime_.textContent=this.buildTimeString_(a,3600<=b),this.isSeeking_||(this.seekBar_.value=a),this.currentTime_.style.cursor="");b=["to right"];0==c?b.push("#000 0%"):(c=(Math.max(f,e.start)-e.start)/g||0,d=(Math.min(d,e.end)-e.start)/g||0,a=(a-e.start)/g||0,b.push("#000 "+100*c+"%"),b.push("#ccc "+100*c+"%"),b.push("#ccc "+
100*a+"%"),b.push("#444 "+100*a+"%"),b.push("#444 "+100*d+"%"),b.push("#000 "+100*d+"%"));this.seekBar_.style.background="linear-gradient("+b.join(",")+")"}};ShakaControls.prototype.buildTimeString_=function(a,b){var c=Math.floor(a/3600),f=Math.floor(a/60%60),d=Math.floor(a%60);10>d&&(d="0"+d);d=f+":"+d;b&&(10>f&&(d="0"+d),d=c+":"+d);return d};var ShakaDemoUtils={setupAssetMetadata:function(a,b){var c={drm:{},manifest:{dash:{}}};a.licenseServers&&(c.drm.servers=a.licenseServers);a.drmCallback&&(c.manifest.dash.customScheme=a.drmCallback);a.clearKeys&&(c.drm.clearKeys=a.clearKeys);b.configure(c);c=b.getNetworkingEngine();c.clearAllRequestFilters();c.clearAllResponseFilters();if(a.licenseRequestHeaders){var f=ShakaDemoUtils.addLicenseRequestHeaders_.bind(null,a.licenseRequestHeaders);c.registerRequestFilter(f)}a.requestFilter&&c.registerRequestFilter(a.requestFilter);
a.responseFilter&&c.registerResponseFilter(a.responseFilter);a.extraConfig&&b.configure(a.extraConfig)},addLicenseRequestHeaders_:function(a,b,c){if(b==shaka.net.NetworkingEngine.RequestType.LICENSE)for(var f in a)c.headers[f]=a[f]},isTsContent:function(a){return(a=a.getVariantTracks().filter(function(a){return 1==a.active})[0])?"video/mp2t"==a.mimeType:!1}};
//# sourceMappingURL=receiver.compiled.map